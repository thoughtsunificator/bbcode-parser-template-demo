!function(){"use strict";class e{constructor(e){this._identifier={},this._properties={...e},this._parent=null,this._children=[],this._listeners=[]}get identifier(){return this._identifier}get properties(){return this._properties}get root(){return this._root}listen(e,t,n){const o=e.listen(t,n);return this._listeners.push(o),o}run(e,n){n.binding._parent=this,this._children.push(n.binding),n.binding._properties={...this.properties,...n.binding.properties},t.run(e,{parentNode:this.root,...n})}remove(){const e=this._listeners.slice();for(const t of e)t.remove();const t=this._children.slice();for(const e of t)e.remove();null!==this._parent&&(this._parent._children=this._parent._children.filter((e=>e!==this))),this.root.remove()}onCreated(){}async onRendered(){}}class t{static PROPERTIES=["tagName","children","identifier","model","binding","properties"];static METHOD={APPEND_CHILD:"APPEND_CHILD",INSERT_BEFORE:"INSERT_BEFORE",REPLACE_NODE:"REPLACE_NODE",WRAP_NODE:"WRAP_NODE",PREPEND:"PREPEND"};static run(n,{parentNode:o,method:i=t.METHOD.APPEND_CHILD,binding:s=new e}={}){const l=t.createNode(o,n,s);s._root=l,s.onCreated(),i===t.METHOD.APPEND_CHILD?o.appendChild(l):i===t.METHOD.INSERT_BEFORE?o.parentNode.insertBefore(l,o):i===t.METHOD.REPLACE_NODE?o.replaceWith(l):i===t.METHOD.WRAP_NODE?(l.appendChild(o.cloneNode(!0)),o.replaceWith(l)):i===t.METHOD.PREPEND&&o.prepend(l),s.onRendered()}static createNode(e,n,o){const{tagName:i,children:s=[]}=n,l=e.ownerDocument.createElement(i);Object.keys(n).filter((e=>!1===t.PROPERTIES.includes(e))).forEach((function(e){l[e]=n[e]}));for(const n of s)if(!0===Object.prototype.hasOwnProperty.call(n,"model")){let e;!0===Object.prototype.hasOwnProperty.call(n,"binding")&&(e=new n.binding({...o.properties,...n.properties}),!0===Object.prototype.hasOwnProperty.call(n,"identifier")&&(o.identifier[n.identifier]=e)),o.run(n.model,{parentNode:l,binding:e})}else{const i=t.createNode(e,n,o);l.appendChild(i)}return!0===Object.prototype.hasOwnProperty.call(n,"identifier")&&(o.identifier[n.identifier]=l),l}}class n{constructor(e,t,n){this._observable=e,this._eventName=t,this._callback=n}remove(){this._observable.removeListener(this)}get eventName(){return this._eventName}get callback(){return this._callback}}class o{constructor(){this._listeners={}}listen(e,t){Array.isArray(this._listeners[e])||(this._listeners[e]=[]);const o=new n(this,e,t);return this._listeners[e].push(o),o}removeListener(e){this._listeners[e.eventName]=this._listeners[e.eventName].filter((t=>t!==e))}emit(e,t){if(Array.isArray(this._listeners[e]))for(const n of this._listeners[e])n.callback(t)}}class i{static tagName;static testNode(e){}static beforeCreateBBNode(e){}static createBBNode(e){}static beforeCreateNode(e){}static appendBBNode(e){e.parentMatch.bbNode.appendChild(e.bbNode)}static createNode(e){}static appendNode(e){e.parentMatch.node.appendChild(e.node)}}class s{constructor(e,t){this._bbDocument=e,this._document=t,this._nodeList=[],this._ignoreNodeList=[],this._matches=[],this._bbNode=null,this._code=null,this._parentMatch=null,this._node=null,this._tags=null}get document(){return this._document}get bbDocument(){return this._bbDocument}get nodeList(){return this._nodeList}get ignoreNodeList(){return this._ignoreNodeList}get matches(){return this._matches}get bbNode(){return this._currentBBNode}set bbNode(e){this._currentBBNode=e}get code(){return this._code}set code(e){this._code=e}get node(){return this._node}set node(e){this._node=e}get tags(){return this._tags}set tags(e){this._tags=e}}class l{static NAME={TEXT:"text",OPENING_TAG:"opening tag",CLOSING_TAG:"closing tag"};constructor(e,t,n){this._name=e,this._buffer=t,this._bufferIndex=n}get name(){return this._name}get buffer(){return this._buffer}get bufferIndex(){return this._bufferIndex}}class a extends l{constructor(e,t){super(l.NAME.TEXT,e,t)}}class r extends l{constructor(e,t,n,o=[]){super(e,t,n),this._keys=o}get keys(){return this._keys}}class u{constructor(e,t){this._name=e,this._value=t}get name(){return this._name}get value(){return this._value}}const d="abcdefghijklmnopqrstuvwxyz",c=[...d+"*"],h=[...d+"0123456789#:/."];class p{static ELEMENT_BBNODE=1;static TEXT_BBNODE=2;constructor(){this._ownerDocument=null,this._parentNode=null,this._previousSibling=null,this._nextSibling=null,this._textContent=""}get ownerDocument(){return this._ownerDocument}get parentNode(){return this._parentNode}get previousSibling(){return this._previousSibling}get nextSibling(){return this._nextSibling}get nodeType(){return this._nodeType}get textContent(){return this._textContent}set textContent(e){if(this.nodeType===p.ELEMENT_BBNODE){for(let e=0;e<this.childNodes.length;e++)this.removeChild(this.childNodes[e]),e--;const t=y(e).documentElement.childNodes[0];this.appendChild(t)}this._textContent=e}remove(){this.parentNode.removeChild(this)}cloneNode(e){let t;if(this.nodeType===p.ELEMENT_BBNODE){t=new b(this.tagName);for(const[e,n]of this.keys)t.setKey(e,n);t._keys=new Map(this.keys),e&&(t.innerBBCode=this.innerBBCode)}else t=new g(this.textContent);return t}}class m{constructor(e){this._currentNode=e,this._rootNode=e,this._path=[]}get currentNode(){return this._currentNode}parentNode(){return this._currentNode=this._currentNode.parentNode,this._currentNode}nextNode(){if(this.currentNode.nodeType===p.ELEMENT_BBNODE&&this.currentNode.childNodes.length>=1){const e=this.currentNode;this._currentNode=this.currentNode.childNodes[0],e!==this._rootNode&&this._path.push(e)}else if(null===this.currentNode.nextSibling||this._path.includes(this.currentNode.nextSibling)){this._currentNode=null;const e=this._path.slice();e.reverse();for(const t of e)if(null!==t.nextSibling&&!this._path.includes(t.nextSibling)){this._currentNode=t.nextSibling,this._path.push(t.nextSibling);break}}else this._path.push(this.currentNode.nextSibling),this._currentNode=this.currentNode.nextSibling;return this.currentNode}}class b extends p{constructor(e,t=null){super(),this._nodeType=p.ELEMENT_BBNODE,this._childNodes=[],this._tagName=e,this._keys=new Map([[e,t]]),this._innerBBCode="";const n=this.tags();this._outerBBCode=`${n.opening}${n.closing}`}get tagName(){return this._tagName}get childNodes(){return this._childNodes}get keys(){return this._keys}get innerBBCode(){return this._innerBBCode}set innerBBCode(e){for(let e=0;e<this.childNodes.length;e++)this.removeChild(this.childNodes[e]),e--;const t=y(e).documentElement.childNodes;for(const e of t)this.appendChild(e);this._innerBBCode=e}get outerBBCode(){return this._outerBBCode}setKey(e,t=null){this._keys.set(e,t);const n=this.tags();this._outerBBCode=`${n.opening}${n.closing}`}appendChild(e){if(this.childNodes.length>=1){const t=this.childNodes[this.childNodes.length-1];t._nextSibling=e,e._previousSibling=t}e._parentNode=this,this.childNodes.push(e),this.build()}removeChild(e){null!==e.previousSibling&&(e.previousSibling._nextSibling=e.nextSibling),null!==e.nextSibling&&(e.nextSibling._previousSibling=e.previousSibling),this.childNodes.splice(this.childNodes.indexOf(e),1),this.build()}build(){const e=[this];let t=this.parentNode;for(;null!==t;)e.push(t),t=t.parentNode;for(const t of e)t._textContent=v(t,{excludeBBCode:!0}),t._innerBBCode=v(t,{excludeBBCode:!1}),t._outerBBCode=v(t,{excludeRoot:!1})}tags(){const e={opening:"",closing:""};e.opening+="[";for(const[t,n]of this.keys)e.opening.length>=2&&(e.opening+=" "),e.opening+=t,null!==n&&(!0===n.includes(" ")?e.opening+='="'+n+'"':e.opening+="="+n);return e.opening+="]","*"!==this.tagName&&(e.closing="[/"+this.tagName+"]"),e}querySelector(e){const t=new m(this);let n=null;for(;t.nextNode();)if(t.currentNode.tagName===e){n=t.currentNode;break}return n}querySelectorAll(e){const t=new m(this);let n=[];for(;t.nextNode();)t.currentNode.tagName===e&&n.push(t.currentNode);return n}}class g extends p{constructor(e){super(),this._nodeType=p.TEXT_BBNODE,this._textContent=e}}class N{constructor(){this._documentElement=new b,this._documentElement._ownerDocument=this}get documentElement(){return this._documentElement}createTextNode(e){const t=new g(e);return t._ownerDocument=this,t}createElement(e,t){const n=new b(e,t);return n._ownerDocument=this,n}createTreeWalker(e){return new m(e)}}function v(e,{excludeBBCode:t=!1,excludeRoot:n=!0}={}){let o="";if(e.nodeType===p.ELEMENT_BBNODE){const i=e.tags();let s="";for(const n of e.childNodes)s+=v(n,{excludeBBCode:t,excludeRoot:!1});e.ownerDocument&&e.ownerDocument.documentElement===e||!1!==t||!1!==n?o+=s:o+=`${i.opening}${s}${i.closing}`}else o+=e.textContent;return o}function q(e){let t=function(e){const t=[...e];let n="";const o=[],i=[];for(const[e,s]of t.entries()){n+=s;const t=e-n.length+1;if(n[0]+n[1]==="[/"){if(2===n.length)continue;if(0===i.length)!0===c.includes(s.toLowerCase())?i.push(new u(s,null)):(o.push(new a(n,t)),n="");else if(i.length>=1){const e=i[i.length-1];!0===c.includes(s.toLowerCase())?e._name+=s:"]"===s?(o.push(new r(l.NAME.CLOSING_TAG,n,t,[...i])),i.splice(0,i.length),n=""):(o.push(new a(n,t)),i.splice(0,i.length),n="")}}else if("["===n[0]){if(1===n.length)continue;if(0===i.length)!0===c.includes(s.toLowerCase())?i.push(new u(s,null)):(o.push(new a(n,t)),n="");else if(i.length>=1){const e=i[i.length-1];if("string"==typeof e.value){if(0===e.value.length)!0===h.includes(s.toLowerCase())||"'"===s||'"'===s?e._value+=s:(o.push(new a(n,t)),n="",i.splice(0,i.length));else if(e.value.length>=1){const d=!("'"!==e.value[0]&&'"'!==e.value[0]||e.value[0]===e.value[e.value.length-1]&&1!==e.value.length);("'"===e.value[0]||'"'===e.value[0])&&!1===d&&e.value.length>1&&e.value[0]===e.value[e.value.length-1]&&(e._value=e.value.substring(1,e.value.length-1)),!0===h.includes(s.toLowerCase())||d?e._value+=s:"]"===s?(o.push(new r(l.NAME.OPENING_TAG,n,t,[...i])),i.splice(0,i.length),n=""):" "===s?i.push(new u("",null)):(o.push(new a(n,t)),n="",i.splice(0,i.length))}}else!0===c.includes(s.toLowerCase())?e._name+=s:"]"===s?(o.push(new r(l.NAME.OPENING_TAG,n,t,[...i])),i.splice(0,i.length),n=""):"="===s?e._value="":e.name.length>=1&&" "===s?i.push(new u("",null)):(o.push(new a(n,t)),n="",i.splice(0,i.length))}}else o.push(new a(n,t)),n=""}return o}(e),n=0,o=!1,i=[];t.filter((e=>e.name===l.NAME.OPENING_TAG||e.name===l.NAME.CLOSING_TAG)).forEach((function(e){e.name===l.NAME.OPENING_TAG&&"code"===e.keys[0].name?!0===o?(i.push(e),n++):o=!0:e.name===l.NAME.CLOSING_TAG&&"code"===e.keys[0].name?!0===o&&0===n?(i.forEach((function(e){e._name=l.NAME.TEXT})),o=!1,i=[]):(i.push(e),n>=1&&n--):!0===o&&i.push(e)}));const s=[],d=[];t.filter((e=>e.name===l.NAME.OPENING_TAG||e.name===l.NAME.CLOSING_TAG)).forEach((e=>{if(e.name===l.NAME.OPENING_TAG){if("*"===e.keys[0].name){const t=s.filter((e=>"*"===e.keys[0].name));t.length>=1&&(d.push({name:"bbcode",bufferIndex:t[t.length-1].bufferIndex,openingTag:t[t.length-1],closingTag:new r(l.NAME.CLOSING_TAG,e.buffer,e.bufferIndex,e.keys)}),s.splice(s.indexOf(t[t.length-1]),1))}s.push(e)}else if(e.name===l.NAME.CLOSING_TAG){if("list"===e.keys[0].name){const t=s.filter((e=>"*"===e.keys[0].name));t.length>=1&&(d.push({name:"bbcode",bufferIndex:t[t.length-1].bufferIndex,openingTag:t[t.length-1],closingTag:e}),s.splice(s.indexOf(t[t.length-1]),1))}const t=s.filter((t=>t.keys[0].name===e.keys[0].name));t.length>=1&&"*"!==e.keys[0].name?(s.splice(s.indexOf(t[t.length-1]),1),d.push({name:"bbcode",bufferIndex:t[t.length-1].bufferIndex,openingTag:t[t.length-1],closingTag:e})):e._name=l.NAME.TEXT}}));for(const e of s)e._name=l.NAME.TEXT;let p=null;for(let e=0;e<t.length;e++)t[e].name===l.NAME.TEXT?null===p?p=t[e]:(p._buffer+=t[e].buffer,t.splice(e,1),e--):p=null;return t=d.concat(t.filter((e=>e.name===l.NAME.TEXT))),t.sort(((e,t)=>e.bufferIndex-t.bufferIndex)),t}function y(e){let t=q(e);const n=new N;return t=t.map((e=>{if("bbcode"===e.name){const t=e.openingTag.keys,o=n.createElement(t[0].name,t[0].value);t.slice(1).forEach((e=>o.setKey(e.name,e.value))),e.bbNode=o}else e.name===l.NAME.TEXT&&(e.bbNode=n.createTextNode(e.buffer));return e})),t.forEach((e=>{const o=t.filter((t=>"bbcode"===t.name&&t!==e&&t.bufferIndex<e.bufferIndex&&e.bufferIndex<t.closingTag.bufferIndex));o.length>=1?o[o.length-1].bbNode.appendChild(e.bbNode):n.documentElement.appendChild(e.bbNode)})),n}var x=Object.freeze({__proto__:null,asterisk:class extends i{static tagName="*";static testNode(e){return"LI"===e.nodeName}static createBBNode(e){return e.bbDocument.createElement("*")}static createNode(e){return e.document.createElement("li")}},bold:class extends i{static tagName="b";static testNode(e){return"SPAN"===e.nodeName&&"bold"===e.style.fontWeight}static createBBNode(e){return e.bbDocument.createElement("b")}static createNode(e){const t=e.document.createElement("span");return t.style.fontWeight="bold",t}},center:class extends i{static tagName="center";static testNode(e){return"DIV"===e.nodeName&&"center"===e.getAttribute("align")}static createBBNode(e){return e.bbDocument.createElement("center")}static createNode(e){const t=e.document.createElement("div");return t.align="center",t}},code:class extends i{static tagName="code";static testNode(e){return"DIV"===e.nodeName&&"codetext"===e.className}static beforeCreateBBNode(e){e.ignoreNodeList.push(e.node.children[0]),e.node.children[0].childNodes.forEach((t=>e.node.appendChild(t)))}static createBBNode(e){return e.bbDocument.createElement("code")}static createNode(e){const t=e.document.createElement("div");t.className="codetext";const n=e.document.createElement("pre");return t.appendChild(n),t}static appendNode(e){"codetext"===e.parentMatch.node.className&&e.parentMatch.node.querySelector("pre").appendChild(e.node)}},color:class extends i{static tagName="color";static testNode(e){return"SPAN"===e.nodeName&&""!==e.style.color}static createBBNode(e){let t=null;if("rgb("===e.node.style.color.slice(0,4)){const n=e.node.style.color.slice(4,-1).split(",");t=`#${`${Number(n[0]).toString(16)}`.padStart(2,"0")}${`${Number(n[1]).toString(16)}`.padStart(2,"0")}${`${Number(n[2]).toString(16)}`.padStart(2,"0")}`.toUpperCase()}else t=e.node.style.color;return e.bbDocument.createElement("color",t)}static createNode(e){const t=e.document.createElement("span");return t.style.color=e.bbNode.keys.get("color"),t}},italic:class extends i{static tagName="i";static testNode(e){return"SPAN"===e.nodeName&&"italic"===e.style.fontStyle}static createBBNode(e){return e.bbDocument.createElement("i")}static createNode(e){const t=e.document.createElement("span");return t.style.fontStyle="italic",t}},image:class extends i{static tagName="img";static testNode(e){return"IMG"===e.nodeName}static createBBNode(e){const t=e.bbDocument.createElement("img");return t.textContent=e.node.getAttribute("src"),t}static createNode(e){const t=e.document.createElement("img");return t.className="userimg",e.bbNode.childNodes.length>=1?t.src=e.bbNode.textContent:t.src=e.bbNode.keys.get("img"),e.bbNode.keys.has("align")&&("left"===e.bbNode.keys.get("align")?t.className="userimg img-a-l":"right"===e.bbNode.keys.get("align")&&(t.className="userimg img-a-r")),t}},list:class extends i{static tagName="list";static testNode(e){return"UL"===e.nodeName||"OL"===e.nodeName}static createBBNode(e){let t=null;"OL"===e.node.nodeName&&(t="1");return e.bbDocument.createElement("list",t)}static createNode(e){let t;return t="1"===e.bbNode.keys.get("list")?e.document.createElement("ol"):e.document.createElement("ul"),t}},quote:class extends i{static tagName="quote";static testNode(e){return"DIV"===e.nodeName&&"quotetext"===e.className}static beforeCreateBBNode(e){"spoiler_content"===e.node.parentNode.className&&e.node.parentNode.parentNode.parentNode.appendChild(e.node),e.node.children.length>=1&&"STRONG"===e.node.children[0].nodeName&&(e.ignoreNodeList.push(e.node.children[0]),e.ignoreNodeList.push(e.node.children[0].firstChild),e.ignoreNodeList.push(e.node.children[1]),e.ignoreNodeList.push(e.node.querySelector(".hide_button")),e.ignoreNodeList.push(e.node.querySelector(".hide_button input")),e.ignoreNodeList.push(e.node.querySelector(".hide_button .spoiler_content")))}static createBBNode(e){let t=null;e.node.children.length>=1&&"STRONG"===e.node.children[0].nodeName&&(t=e.node.children[0].textContent.substring(0,e.node.children[0].textContent.length-" said:".length));return e.bbDocument.createElement("quote",t)}static createNode(e){const t=e.document.createElement("div");if(t.className="quotetext",null!==e.bbNode.keys.get("quote")){const n=e.document.createElement("strong");n.textContent=e.bbNode.keys.get("quote")+" said:",t.appendChild(n);const o=e.document.createElement("br");t.appendChild(o)}let n=e.bbNode.ownerDocument.createTreeWalker(e.bbNode);const o=[];for(;n.parentNode();)o.push(n.currentNode);const i=o.filter((e=>"quote"===e.tagName));n=e.bbNode.ownerDocument.createTreeWalker(e.bbNode);const s=[];for(;n.nextNode();)s.push(n.currentNode);const l=s.filter((e=>"quote"===e.tagName));if(1===i.length&&l.length>=1){const n=e.document.createElement("div");n.className="hide_button";const o=e.document.createElement("input");o.type="button",o.className="button expand_quote",o.setAttribute("onclick",'this.nextSibling.style.display = "block";this.remove();'),o.value="Expand Quote",n.appendChild(o);const i=e.document.createElement("span");i.className="spoiler_content",i.style.display="none",t.appendChild(n),n.appendChild(i)}return t}static appendNode(e){if("quotetext"===e.parentMatch.node.className){const t=e.bbDocument.createTreeWalker(e.bbNode),n=[];for(;t.parentNode();)n.push(t.currentNode);const o=n.filter((e=>"quote"===e.tagName));if("quotetext"===e.node.className&&2===o.length)e.matches.find((e=>e.bbNode===o[1])).node.querySelector(".spoiler_content").appendChild(e.node);else{const t=[...e.parentMatch.node.children].find((e=>"hide_button"===e.className));t?t.before(e.node):e.parentMatch.node.appendChild(e.node)}}}},right:class extends i{static tagName="right";static testNode(e){return"DIV"===e.nodeName&&"right"===e.getAttribute("align")}static createBBNode(e){return e.bbDocument.createElement("right")}static createNode(e){const t=e.document.createElement("div");return t.align="right",t}},strike:class extends i{static tagName="s";static testNode(e){return"SPAN"===e.nodeName&&"line-through"===e.style.textDecoration}static createBBNode(e){return e.bbDocument.createElement("s")}static createNode(e){const t=e.document.createElement("span");return t.style.textDecoration="line-through",t}},size:class extends i{static tagName="size";static testNode(e){return"SPAN"===e.nodeName&&""!==e.style.fontSize}static createBBNode(e){return e.bbDocument.createElement("size",e.node.style.fontSize.substring(0,e.node.style.fontSize.length-1))}static createNode(e){const t=e.document.createElement("span");return t.style.fontSize=e.bbNode.keys.get("size")+"%",t}},spoiler:class extends i{static tagName="spoiler";static testNode(e){return"DIV"===e.nodeName&&"hide_button"===e.className&&2===e.children.length&&"INPUT"===e.children[0].nodeName&&"button show_button"===e.children[0].className&&"SPAN"===e.children[1].nodeName&&"spoiler_content"===e.children[1].className}static beforeCreateBBNode(e){"spoiler_content"===e.node.parentNode.className&&e.node.parentNode.parentNode.appendChild(e.node);const t=e.node.children[0];t.nextElementSibling.childNodes.forEach((t=>e.node.appendChild(t))),e.ignoreNodeList.push(t),e.ignoreNodeList.push(t.nextElementSibling)}static createBBNode(e){let t=null,n=e.node.children[0].value.substring("show ".length);"spoiler"!==n&&(t=n);return e.bbDocument.createElement("spoiler",t)}static createNode(e){const t=e.document.createElement("div");t.className="hide_button";const n=e.document.createElement("input");n.type="button",n.className="button show_button",n.setAttribute("onclick",'const isHidden=this.nextElementSibling.style.display === "none";this.value=isHidden === true  ? this.value.replace("Show", "Hide") : this.value.replace("Hide", "Show");this.nextElementSibling.style.display=isHidden === true ? "block" : "none";'),null!==e.bbNode.keys.get("spoiler")?n.value=`Show ${e.bbNode.keys.get("spoiler")}`:n.value="Show spoiler",t.appendChild(n);const o=e.document.createElement("span");return o.className="spoiler_content",o.style.display="none",t.appendChild(o),t}static appendNode(e){"hide_button"===e.parentMatch.node.className&&e.parentMatch.node.querySelector(".spoiler_content").appendChild(e.node)}},underline:class extends i{static tagName="u";static testNode(e){return"SPAN"===e.nodeName&&"underline"===e.style.textDecoration}static createBBNode(e){return e.bbDocument.createElement("u")}static createNode(e){const t=e.document.createElement("span");return t.style.textDecoration="underline",t}},url:class extends i{static tagName="url";static testNode(e){return"A"===e.nodeName}static createBBNode(e){return e.bbDocument.createElement("url",e.node.getAttribute("href"))}static createNode(e){const t=e.document.createElement("a");return t.href=e.bbNode.keys.get("url"),t.rel="nofollow noopener noreferrer",t.target="_blank",t}},youtube:class extends i{static tagName="yt";static testNode(e){return"IFRAME"===e.nodeName&&"movie youtube"===e.className&&e.src.startsWith("https://youtube.com/embed/")&&e.src.length>"https://youtube.com/embed/".length}static createBBNode(e){return e.bbDocument.createElement("yt")}static createNode(e){const t=e.document.createElement("iframe");return t.className="movie youtube",e.bbNode.childNodes.length>=1?t.src="https://youtube.com/embed/"+e.bbNode.textContent:t.src="https://youtube.com/embed/"+e.bbNode.keys.get("yt"),t.width="425",t.height="355",t.frameBorder="0",t.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",t.allowFullscreen=!0,t}}}),f=[{name:"Help page",value:"How to use BBcode\n\nBBcode is used to format text, insert url's and pictures in a post on the forums, profile, comments and in PM's. BBcode is similar to HTML. The only difference is BBcode uses square braces [] instead of <> in HTML. Written by Cheesebaron.\n\nText Formatting\n\n\tYou can change the style of the text the following ways:\n\t[b]bo-rudo[/b] - this makes the text bold\n\t[u]anda-rain[/u] - this underlines the text\n\t[i]itarikku[/i] - this italicises the text\n\t[s]sutoraiki[/s] - this strikes through the text\n\t[center]text[/center] - this centers the text\n\t[right]text[/right] - this right justifies the text\n\nChanging the text color and size\n\n\t[color=blue]buru[/color] - this changes the text color to blue\n\n\tYou can also use colour codes to define what colour you want your text to be\n\t[color=#FFFFFF]Shiroi[/color] - this changes the text color to white\n\n\tYou can change the text size by using the [size=][/size] tag, the size is dependant on what value written. You can choose 20 to 200, which is representing the size in percent.\n\n\t\t[size=30]KOMAKAI[/size] - will give a very small text size [size=200]KOUDAI[/size] - will give a huge text size\n\nPosting a YouTube Video\n\n\t[yt]_YL7t_QbQ2M[/yt]\n\n\tPosts a YouTube video.\n\nCreating lists\n\n\tYou can create a list by using the [code][list][/list][/code] tag.\n\n\tTo create an un-ordered list:\n\n\t\t[list]\n\t\t[*]kawaii\n\t\t[*]fugu\n\t\t[*]shouen\n\t\t[/list]\n\n\n\tTo create an ordered, numbered list:\n\n\n\t[list=1]\n\t[*]kawaii\n\t[*]fugu\n\t[*]shouen\n\t[/list]\n\n\tNested list:\n\n\t\t[list][*]Level 1.[*]Level 1.\n\t[list][*]Level 2.[*]Level 2.\n\t[list][*]Level 3.[*]Level 3.\n\t[list][*]Level 4.[*]Level 4.\n\t[list=1][*]Numbered list.[*]Numbered list.\n\t[/list][/list][/list][/list][/list]\n\n\nCreating links and showing images\n\n\t[url=https://myanimelist.net]Visit MyAnimeList[/url] - this would display Visit MyAnimeList as an URL.\n\n\tTo insert a picture to your post you can use the [code][img][/img][/code] tag.\n\n\t\t[img]./resource/image.jpg[/img]\n\n\tTo insert a left/right aligned picture you can use the [code][img align=(left or right)][/img][/code].\n\n\t\t[img align=left]./resource/image.jpg[/img]\n\t\t[img align=right]./resource/image.jpg[/img]\n\nMaking a spoiler button\n\n\tTo make a spoiler button use the [spoiler][/spoiler] tag, and the text in between the tags become invisible until the \"Show spoiler\" button is clicked.\n\n\t\t[spoiler]This is a spoiler for an episode of an anime that could make people angry[/spoiler]\n\n\tTo make a named spoiler button you can use the [code][spoiler=name][/spoiler][/code].\n\n\t\t[spoiler=secret]Secret[/spoiler]\n\t\t[spoiler=\"big secret\"]Big Secret[/spoiler]\n\t\t[spoiler='big secret']Big Secret[/spoiler]\n\t\t[spoiler='nested spoiler'][spoiler][spoiler][spoiler][spoiler]Secret[/spoiler][/spoiler][/spoiler][/spoiler][/spoiler]\n\nWriting raw text\n\n\tTo write raw text use the [code][/code] tag.\n\n\t\t[code]You can make the text bold with [code][b][b][b]text[/b][/b][/b][/code][code][b][/b][/code]tag.[/code]\n\nCombining BBcode\n\n\tYou can combine BBcodes, but you have to remember to end the tags in the right order\n\tThis example is WRONG:\n\t[url=https://myanimelist.net][img]https://myanimelist.net/picture.jpg[/url][/img]\n\tThis example is RIGHT:\n\t[url=https://myanimelist.net][img]https://myanimelist.net/picture.jpg[/img][/url]\n\nQuotes\n\n[quote]Some text[/quote]\n\n[quote=nickname]Some text[/quote]\n\n[quote=nickname]Some text[quote=nickname]Some text[quote=nickname]Some text[quote=nickname]Some text[quote=\"nickname\"]Some text[/quote][/quote][/quote][/quote][/quote]\n\n\n\nUser Mention\n\n\tTo mention another user on the forum add an @ symbol before their name. For example @user_name"},{name:"Underline",value:"[u]text[/u]"},{name:"Mixed",value:"[u][u][b]test[b]test[/b][/u][/u][/b]"},{name:"Mixed_2",value:"[u][u][b]test[b]test[/b][/b][/u][/u]"},{name:"Quote",value:'[quote]Some text[/quote]\n\n[quote=nickname1]Some text[/quote]\n\n[quote=nickname1]Text 1[quote=nickname2]Text 2[quote=nickname3]Text 3[quote=nickname4]Text 4[quote="nickname5"]Text 5[/quote][/quote][/quote][/quote][/quote]\n\n[quote=nickname1]Some text[quote=nickname2]Some text 2[/quote][/quote]'},{name:"Spoiler",value:"[spoiler=name]First level[spoiler=hello]Second level[spoiler]Third Level[spoiler]Fourth level[/spoiler][/spoiler][/spoiler][/spoiler][spoiler]First level[/spoiler]"},{name:"List",value:"[list][*]test[*]test[*]test[/list]"},{name:"List",value:"[list][*]test[*]test[list][*]test[*]test[*]test[list][*]test[*]test[*]test[/list][/list][list][*]test[*]test[*]test[/list][/list][list][*]test[*]test[*]test[/list]"},{name:"code",value:"[code][b][/b][s][/s][code]tesdsadt[/code][/code]"},{name:"linefeed2",value:"dsadsad\n\ntest\ntest"},{name:"linefeed2",value:"dsadsad\ndsadsad\n\n\ndsadsadsad\n\n\ndsadsad\n\n\n\ndsadsadsada\n\n\n\n\ndsad\n\n"}],_=[{name:"Help page",value:'How to use BBcode\n\nBBcode is used to format text, insert url\'s and pictures in a post on the forums, profile, comments and in PM\'s. BBcode is similar to HTML. The only difference is BBcode uses square braces [] instead of &lt;&gt; in HTML. Written by Cheesebaron.\n\nText Formatting\n\n\tYou can change the style of the text the following ways:\n\t<span style="font-weight: bold;">bo-rudo</span> - this makes the text bold\n\t<span style="text-decoration: underline;">anda-rain</span> - this underlines the text\n\t<span style="font-style: italic;">itarikku</span> - this italicises the text\n\t<span style="text-decoration: line-through;">sutoraiki</span> - this strikes through the text\n\t<div align="center">text</div> - this centers the text\n\t<div align="right">text</div> - this right justifies the text\n\nChanging the text color and size\n\n\t<span style="color: blue;">buru</span> - this changes the text color to blue\n\n\tYou can also use colour codes to define what colour you want your text to be\n\t<span style="color: rgb(255, 255, 255);">Shiroi</span> - this changes the text color to white\n\n\tYou can change the text size by using the [size=][/size] tag, the size is dependant on what value written. You can choose 20 to 200, which is representing the size in percent.\n\n\t\t<span style="font-size: 30%;">KOMAKAI</span> - will give a very small text size <span style="font-size: 200%;">KOUDAI</span> - will give a huge text size\n\nPosting a YouTube Video\n\n\t<iframe class="movie youtube" src="https://youtube.com/embed/_YL7t_QbQ2M" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" width="425" height="355" frameborder="0">_YL7t_QbQ2M</iframe>\n\n\tPosts a YouTube video.\n\nCreating lists\n\n\tYou can create a list by using the <div class="codetext"><pre>[list][/list]</pre></div> tag.\n\n\tTo create an un-ordered list:\n\n\t\t<ul>\n\t\t<li></li>kawaii\n\t\t<li></li>fugu\n\t\t<li>shouen\n\t\t</li></ul>\n\n\n\tTo create an ordered, numbered list:\n\n\n\t<ol>\n\t<li></li>kawaii\n\t<li></li>fugu\n\t<li>shouen\n\t</li></ol>\n\n\tNested list:\n\n\t\t<ul><li></li>Level 1.<li></li>Level 1.\n\t<ul><li></li>Level 2.<li></li>Level 2.\n\t<ul><li></li>Level 3.<li></li>Level 3.\n\t<ul><li></li>Level 4.<li></li>Level 4.\n\t<ol><li></li>Numbered list.<li>Numbered list.\n\t</li></ol></ul></ul></ul></ul>\n\n\nCreating links and showing images\n\n\t<a href="https://myanimelist.net" rel="nofollow noopener noreferrer" target="_blank">Visit MyAnimeList</a> - this would display Visit MyAnimeList as an URL.\n\n\tTo insert a picture to your post you can use the <div class="codetext"><pre>[img][/img]</pre></div> tag.\n\n\t\t<img class="userimg" src="./resource/image.jpg">\n\n\tTo insert a left/right aligned picture you can use the <div class="codetext"><pre>[img align=(left or right)][/img]</pre></div>.\n\n\t\t<img class="userimg img-a-l" src="./resource/image.jpg">\n\t\t<img class="userimg img-a-r" src="./resource/image.jpg">\n\nMaking a spoiler button\n\n\tTo make a spoiler button use the <div class="hide_button"><input type="button" class="button show_button" onclick="const isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler"><span class="spoiler_content" style="display: none;"></span></div> tag, and the text in between the tags become invisible until the "Show spoiler" button is clicked.\n\n\t\t<div class="hide_button"><input type="button" class="button show_button" onclick="const isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler"><span class="spoiler_content" style="display: none;">This is a spoiler for an episode of an anime that could make people angry</span></div>\n\n\tTo make a named spoiler button you can use the <div class="codetext"><pre>[spoiler=name][/spoiler]</pre></div>.\n\n\t\t<div class="hide_button"><input type="button" class="button show_button" onclick="const isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show secret"><span class="spoiler_content" style="display: none;">Secret</span></div>\n\t\t<div class="hide_button"><input type="button" class="button show_button" onclick="const isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show big secret"><span class="spoiler_content" style="display: none;">Big Secret</span></div>\n\t\t<div class="hide_button"><input type="button" class="button show_button" onclick="const isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show big secret"><span class="spoiler_content" style="display: none;">Big Secret</span></div>\n\t\t<div class="hide_button"><input type="button" class="button show_button" onclick="const isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show nested spoiler"><span class="spoiler_content" style="display: none;"><div class="hide_button"><input type="button" class="button show_button" onclick="const isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler"><span class="spoiler_content" style="display: none;"><div class="hide_button"><input type="button" class="button show_button" onclick="const isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler"><span class="spoiler_content" style="display: none;"><div class="hide_button"><input type="button" class="button show_button" onclick="const isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler"><span class="spoiler_content" style="display: none;"><div class="hide_button"><input type="button" class="button show_button" onclick="const isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler"><span class="spoiler_content" style="display: none;">Secret</span></div></span></div></span></div></span></div></span></div>\n\nWriting raw text\n\n\tTo write raw text use the <div class="codetext"><pre></pre></div> tag.\n\n\t\t<div class="codetext"><pre>You can make the text bold with [code][b][b][b]text[/b][/b][/b][/code][code][b][/b][/code]tag.</pre></div>\n\nCombining BBcode\n\n\tYou can combine BBcodes, but you have to remember to end the tags in the right order\n\tThis example is WRONG:\n\t<a href="https://myanimelist.net" rel="nofollow noopener noreferrer" target="_blank"><img class="userimg" src="https://myanimelist.net/picture.jpg"></a>\n\tThis example is RIGHT:\n\t<a href="https://myanimelist.net" rel="nofollow noopener noreferrer" target="_blank"><img class="userimg" src="https://myanimelist.net/picture.jpg"></a>\n\nQuotes\n\n<div class="quotetext">Some text</div>\n\n<div class="quotetext"><strong>nickname said:</strong><br>Some text</div>\n\n<div class="quotetext"><strong>nickname said:</strong><br>Some text<div class="quotetext"><strong>nickname said:</strong><br><div class="hide_button"><input type="button" class="button expand_quote" onclick="this.nextSibling.style.display = &quot;block&quot;;this.remove();" value="Expand Quote"><span class="spoiler_content" style="display: none;"><div class="quotetext"><strong>nickname said:</strong><br>Some text<div class="quotetext"><strong>nickname said:</strong><br>Some text<div class="quotetext"><strong>nickname said:</strong><br>Some text</div></div></div></span></div>Some text</div></div>\n\n\n\nUser Mention\n\n\tTo mention another user on the forum add an @ symbol before their name. For example @user_name'},{name:"Anchor",value:'<a href="https://myanimelist.net" rel="nofollow">Hello World</a> '},{name:"Quote",value:'<div class="quotetext">Some text</div>\n\n<div class="quotetext"><strong>nickname1 said:</strong><br>Some text</div>\n\n<div class="quotetext"><strong>nickname1 said:</strong><br>Text 1<div class="quotetext"><strong>nickname2 said:</strong><br>Text 2<div class="hide_button"><input class="button expand_quote" onclick="this.nextSibling.style.display = &quot;block&quot;;this.remove();" value="Expand Quote" type="button"><span class="spoiler_content" style="display: none;"><div class="quotetext"><strong>nickname3 said:</strong><br>Text 3<div class="quotetext"><strong>nickname4 said:</strong><br>Text 4<div class="quotetext"><strong>nickname5 said:</strong><br>Text 5</div></div></div></span></div></div></div>\n\n<div class="quotetext"><strong>nickname1 said:</strong><br>Some text<div class="quotetext"><strong>nickname2 said:</strong><br>Some text 2</div></div>'},{name:"Quote_2",value:'<div class="quotetext">\n\t<strong>nickname1 said:</strong>\n\t<br>Text 1<div class="quotetext">\n\t\t<strong>nickname2 said:</strong>\n\t\t<br>Text 2<div class="hide_button">\n\t\t\t<input value="Expand Quote" class="button expand_quote" type="button" onclick="this.nextSibling.style.display = &quot;block&quot;;this.remove();">\n\t\t\t<span class="spoiler_content" style="display: none;">\n\t\t\t\t<div class="quotetext">\n\t\t\t\t\t<strong>nickname3 said:</strong>\n\t\t\t\t\t<br>Text 3<div class="quotetext">\n\t\t\t\t\t\t<strong>nickname4 said:</strong>\n\t\t\t\t\t\t<br>Text 4<div class="quotetext">\n\t\t\t\t\t\t\t<strong>nickname5 said:</strong>\n\t\t\t\t\t\t\t<br>Text 5\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>'},{name:"List",value:"<ul><li>test</li>\n<li>test</li>\n<li>test</li>\n<li>test</li></ul>"},{name:"Spoiler",value:'<div class="hide_button"><input class="button show_button" onclick="let isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show name" type="button"><span class="spoiler_content" style="display: none;">First level<div class="hide_button"><input class="button show_button" onclick="let isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show hello" type="button"><span class="spoiler_content" style="display: none;">Second level<div class="hide_button"><input class="button show_button" onclick="let isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler" type="button"><span class="spoiler_content" style="display: none;">Third Level<div class="hide_button"><input class="button show_button" onclick="let isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler" type="button"><span class="spoiler_content" style="display: none;">Fourth level</span></div></span></div></span></div></span></div><div class="hide_button"><input class="button show_button" onclick="let isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler" type="button"><span class="spoiler_content" style="display: none;">First level</span></div>'},{name:"Spoiler_2",value:'<div class="hide_button">\n\t<input class="button show_button" onclick="let isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show name" type="button">\n\t<span class="spoiler_content" style="display: none;">First level<div class="hide_button">\n\t\t\t<input class="button show_button" onclick="let isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show hello" type="button">\n\t\t\t<span class="spoiler_content" style="display: none;">Second level<div class="hide_button">\n\t\t\t\t\t<input class="button show_button" onclick="let isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler" type="button">\n\t\t\t\t\t<span class="spoiler_content" style="display: none;">Third Level<div class="hide_button">\n\t\t\t\t\t\t\t<input class="button show_button" onclick="let isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler" type="button">\n\t\t\t\t\t\t\t<span class="spoiler_content" style="display: none;">Fourth level</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t</div>\n\t</span>\n</div>\n<div class="hide_button">\n\t<input class="button show_button" onclick="let isHidden=this.nextElementSibling.style.display === &quot;none&quot;;this.value=isHidden === true  ? this.value.replace(&quot;Show&quot;, &quot;Hide&quot;) : this.value.replace(&quot;Hide&quot;, &quot;Show&quot;);this.nextElementSibling.style.display=isHidden === true ? &quot;block&quot; : &quot;none&quot;;" value="Show spoiler" type="button">\n\t<span class="spoiler_content" style="display: none;">First level</span>\n</div>'},{name:"List 2",value:"<ul>\n\t<li>test</li>\n\t<li>test<ul>\n\t\t\t<li>test</li>\n\t\t\t<li>test</li>\n\t\t\t<li>test<ul>\n\t\t\t\t\t<li>test</li>\n\t\t\t\t\t<li>test</li>\n\t\t\t\t\t<li>test</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t</ul>\n\t</li>\n\t<ul>\n\t\t<li>test</li>\n\t\t<li>test</li>\n\t\t<li>test</li>\n\t</ul>\n</ul>\n<ul>\n\t<li>test</li>\n\t<li>test</li>\n\t<li>test</li>\n</ul>"},{name:"code",value:'\n<div class="codetext">\n<pre>[b][/b][s][/s][code]tesdsadt[/code]</pre>\n</div>\n\n\t\t\t'},{name:"linefeed",value:"<div>dsadsad</div><div>dsadsad</div><div><br></div><div>dsadsadsad</div><div><br></div><div>dsadsad<br><br><br><br>dsadsadsada<br><br><br><br><br>dsad<br></div>"},{name:"linefeed2",value:"<div>dsadsad</div>\ntest\ntest"}],E=e=>({tagName:"div",style:"overflow: hidden",children:[{tagName:"h1",style:"text-align: center",textContent:`${e.from} to ${e.to}`},{tagName:"section",style:"display: grid;grid-template-columns: 35vw 30vw 30vw;grid-gap: 25px; overflow: hidden; height: 100%",children:[{tagName:"div",style:"overflow: hidden",children:[{tagName:"select",style:"width: 100%",identifier:"case",children:e.cases.map((e=>({tagName:"option",value:e.value,textContent:e.name})))},{tagName:"textarea",identifier:"input"}]},{tagName:"pre",style:"overflow: auto; word-break: break-word; white-space: break-spaces;",identifier:"inputPreview"},{tagName:"div",className:"output",style:"overflow: auto; word-break: break-word; white-space: break-spaces;",identifier:"output"}]}]});class w extends e{onCreated(){const{output:e,template:t}=this.properties,n=new o;"html"===e?this.listen(n,"update",(async()=>{this.identifier.inputPreview.textContent=t.toHTML(this.identifier.input.value),this.identifier.output.innerHTML=t.toHTML(this.identifier.input.value)})):"bbcode"===e&&this.listen(n,"update",(async()=>{this.identifier.inputPreview.textContent=t.toBBCode(this.identifier.input.value),this.identifier.output.innerHTML=t.toHTML(t.toBBCode(this.identifier.input.value))})),this.identifier.input.addEventListener("input",(()=>n.emit("update"))),this.identifier.case.addEventListener("change",(()=>{this.identifier.input.value=this.identifier.case.value,n.emit("update")})),this.identifier.input.value=this.identifier.case.value,n.emit("update")}}const S=new class{constructor(e,t){this._codes=e,this._document=t}get codes(){return this._codes}get document(){return this._document}toHTML(e){const t=y(e),n=new s(t,this.document),o=t.createTreeWalker(t.documentElement);for(;o.nextNode();)n.nodeList.push(o.currentNode);const i=this.document.createElement("div");for(const e of n.nodeList){if(n.bbNode=e,n.tags=null,n.code=null,n.node=null,n.parentMatch=null,-1!==n.ignoreNodeList.indexOf(e))continue;if(e.nodeType===p.ELEMENT_BBNODE){n.tags=e.tags();const o=this.codes.find((t=>t.tagName===e.tagName));if(o)n.code=o,n.code.beforeCreateNode(n),n.node=n.code.createNode(n);else{const o=t.createTreeWalker(e);for(;o.nextNode();)n.ignoreNodeList.push(o.currentNode);n.node=this.document.createTextNode(e.outerHTML)}}else n.node=this.document.createTextNode(e.textContent);const o=n.matches.find((t=>t.bbNode===e.parentNode));if(o){n.parentMatch=o;const e=this.codes.find((e=>e.tagName===o.bbNode.tagName));e?e.appendNode(n):n.parentMatch.node.appendChild(n.node)}else i.appendChild(n.node);n.node.nodeType===this.document.ELEMENT_NODE&&n.matches.push({bbNode:e,node:n.node})}return i.innerHTML}toBBCode(e){const t=new N,n=new s(t,this.document),o=this.document.createElement("div");o.innerHTML=e;const i=this.document.createTreeWalker(o);for(;i.nextNode();)n.nodeList.push(i.currentNode);for(const e of n.nodeList){if(n.node=e,n.code=null,n.bbNode=null,n.tags=null,n.parentMatch=null,-1!==n.ignoreNodeList.indexOf(e))continue;if(e.nodeType===this.document.ELEMENT_NODE){const o=this.codes.find((t=>!0===t.testNode(e)));if(o)n.code=o,n.code.beforeCreateBBNode(n),n.bbNode=n.code.createBBNode(n),n.tags=n.bbNode.tags();else{const o=this.document.createTreeWalker(e);for(;o.nextNode();)n.ignoreNodeList.push(o.currentNode);n.bbNode=t.createTextNode(e.outerHTML)}}else e.nodeType===this.document.TEXT_NODE&&(n.bbNode=t.createTextNode(e.textContent));const o=n.matches.find((t=>t.node===e.parentNode));if(o){n.parentMatch=o;const e=this.codes.find((e=>e.tagName===o.bbNode.tagName));e?e.appendBBNode(n):n.parentMatch.bbNode.appendChild(n.bbNode)}else t.documentElement.appendChild(n.bbNode);n.bbNode.nodeType===p.ELEMENT_BBNODE&&n.matches.push({bbNode:n.bbNode,node:e})}return t.documentElement.innerBBCode}}(Object.values(x),document);window.addEventListener("load",(async function(){t.run(E({from:"BBCode",to:"HTML",cases:f}),{parentNode:document.body,binding:new w({output:"html",template:S})}),t.run(E({from:"HTML",to:"BBCode",cases:_}),{parentNode:document.body,binding:new w({output:"bbcode",template:S})})}))}();
